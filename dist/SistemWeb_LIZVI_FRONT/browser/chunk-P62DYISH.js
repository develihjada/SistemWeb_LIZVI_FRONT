import{a as z}from"./chunk-XDWJ5BTG.js";import{d as N}from"./chunk-TFTKUNPW.js";import"./chunk-I36WQ6MU.js";import"./chunk-PIYG2HY2.js";import{e as V,g as j,h as B,i as D,j as H,n as F}from"./chunk-6Y6W3DZI.js";import{$a as L,Fa as P,Ka as h,R as v,Ta as d,Ua as e,Va as n,W as f,Wa as c,X as _,Y as p,Z as u,_a as E,ab as b,db as x,fb as g,i as M,jb as r,kb as w,l as k,lb as y,p as C,q as R,ra as l,ub as O,vb as I,wb as T,x as S}from"./chunk-NRNLENJO.js";var A=(i,a,t)=>({"bg-green-100 text-green-800":i,"bg-red-100 text-red-800":a,"bg-gray-100 text-gray-800":t});function G(i,a){i&1&&(e(0,"div",18)(1,"div",19),p(),e(2,"svg",20),c(3,"circle",21)(4,"path",22),n(),r(5," Cargando roles... "),n()())}function Y(i,a){if(i&1){let t=b();e(0,"div",18)(1,"div",23)(2,"div",24),p(),e(3,"svg",25),c(4,"path",26),n(),u(),e(5,"p",27),r(6),n()(),e(7,"button",28),x("click",function(){f(t);let o=g();return _(o.listarRoles())}),r(8," Reintentar "),n()()()}if(i&2){let t=g();l(6),w(t.errorMessage)}}function q(i,a){if(i&1){let t=b();e(0,"tr",38)(1,"td",39),r(2),n(),e(3,"td",40)(4,"div",41),r(5),n(),e(6,"div",42),r(7,"Rol del sistema"),n()(),e(8,"td",43)(9,"div",44),r(10),n()(),e(11,"td",45)(12,"span",46),r(13),n()(),e(14,"td",47)(15,"div",48)(16,"button",49),x("click",function(){let o=f(t).$implicit,m=g(3);return _(m.editarRol(o.id))}),p(),e(17,"svg",50),c(18,"path",51),n()(),u(),e(19,"button",52),x("click",function(){let o=f(t).$implicit,m=g(3);return _(m.eliminarRol(o.id))}),p(),e(20,"svg",50),c(21,"path",53),n()()()()()}if(i&2){let t=a.$implicit;l(2),w(t.id),l(3),w(t.nombre),l(4),d("title",t.descripcion),l(),y(" ",t.descripcion," "),l(2),d("ngClass",O(6,A,t.estado===1,t.estado===0,t.estado!==0&&t.estado!==1)),l(),y(" ",t.estado===1?"Activo":t.estado===0?"Inactivo":"Desconocido"," ")}}function U(i,a){if(i&1){let t=b();e(0,"tr")(1,"td",54)(2,"div",55),p(),e(3,"svg",56),c(4,"path",57),n(),u(),e(5,"h3",58),r(6,"No hay roles registrados"),n(),e(7,"p",59),r(8,"Comienza creando tu primer rol del sistema"),n(),e(9,"button",60),x("click",function(){f(t);let o=g(3);return _(o.registrarRol())}),r(10," Crear Rol "),n()()()()}}function J(i,a){if(i&1&&(E(0),e(1,"table",31)(2,"thead",32)(3,"tr")(4,"th",33),r(5,"ID"),n(),e(6,"th",33),r(7,"Nombre"),n(),e(8,"th",33),r(9,"Descripci\xF3n"),n(),e(10,"th",34),r(11,"Estado"),n(),e(12,"th",35),r(13,"Acciones"),n()()(),e(14,"tbody",36),h(15,q,22,10,"tr",37)(16,U,11,0,"tr",30),n()(),L()),i&2){let t=a.ngIf,s=g(2);l(15),d("ngForOf",t)("ngForTrackBy",s.trackByFn),l(),d("ngIf",t.length===0)}}function K(i,a){if(i&1&&(e(0,"div",29),h(1,J,17,3,"ng-container",30),I(2,"async"),n()),i&2){let t=g();l(),d("ngIf",T(2,1,t.rolesData$))}}var $=class i{location;router;api;isLoading=!1;initialLoadDone=!1;errorMessage=null;rolesSubject=new M([]);rolesData$=this.rolesSubject.asObservable();constructor(){this.location=v(V),this.router=v(N),this.api=v(z)}ngOnInit(){this.listarRoles()}listarRoles(){this.errorMessage=null,this.isLoading=!0;let a={estado:2};this.api.listaRoles(a).pipe(C({each:7e3}),R(o=>o.exito?o.roles:[]),S(o=>(this.errorMessage="No se pudo conectar al servidor. Revisa tu red o int\xE9ntalo m\xE1s tarde.",k([])))).subscribe({next:o=>{let m=[];Array.isArray(o)?m=o:o&&typeof o=="object"?m=[o]:m=[],this.rolesSubject.next(m),this.initialLoadDone=!0},error:o=>{this.errorMessage=this.errorMessage??"No se pudo conectar al servidor."}}).add(()=>{this.isLoading=!1})}volverInicio(){this.location.back()}registrarRol(){this.router.navigate(["/registro-roles"])}editarRol(a){}eliminarRol(a){confirm(`\xBFEst\xE1s seguro de eliminar el rol con ID ${a}?`)}volverConfiguraciones(){this.location.back()}trackByFn(a,t){return t.id}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=P({type:i,selectors:[["app-lista-roles-page"]],decls:21,vars:3,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-50","p-4","sm:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","pb-6","border-b","border-gray-300","flex-none"],[1,"flex","items-center","gap-4","mb-4","md:mb-0"],[1,"bg-orange-600","text-white","rounded-full","p-2","h-10","w-10","flex","items-center","justify-center","hover:bg-orange-700","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M5 12l14 0"],["d","M5 12l4 4"],["d","M5 12l4 -4"],[1,"text-3xl","font-extrabold","text-gray-900"],[1,"w-full","md:w-auto","px-6","py-3","bg-orange-600","text-white","font-semibold","rounded-lg","shadow-md","hover:bg-orange-700","transition","duration-150","flex","items-center","justify-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mt-6","bg-white","p-4","rounded-lg","shadow-md"],["type","text","placeholder","Buscar por nombre de rol o ID...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-orange-600","focus:border-orange-600","transition"],[1,"mt-8","flex-grow","overflow-x-auto","bg-white","rounded-lg","shadow-md"],["class","p-8 text-center",4,"ngIf"],["class","p-4",4,"ngIf"],[1,"p-8","text-center"],[1,"inline-flex","items-center","px-4","py-2","font-semibold","leading-6","text-sm","shadow","rounded-md","text-orange-500","bg-orange-100","transition","ease-in-out","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-orange-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-700","font-medium"],[1,"mt-4","px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition","duration-150",3,"click"],[1,"p-4"],[4,"ngIf"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-200"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-center","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors duration-150",4,"ngFor","ngForOf","ngForTrackBy"],[1,"hover:bg-gray-50","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-semibold","text-gray-800"],[1,"text-xs","text-gray-500"],[1,"px-6","py-4"],[1,"text-sm","text-gray-500","max-w-xs","truncate",3,"title"],[1,"px-6","py-4","whitespace-nowrap","text-center"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","justify-end","space-x-2"],["title","Editar rol",1,"text-orange-600","hover:text-orange-900","transition-colors","duration-150",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Eliminar rol",1,"text-red-600","hover:text-red-900","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["colspan","5",1,"px-6","py-12","text-center"],[1,"flex","flex-col","items-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-16","h-16","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"px-4","py-2","bg-orange-600","text-white","rounded-lg","hover:bg-orange-700","transition","duration-150",3,"click"]],template:function(t,s){t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),x("click",function(){return s.volverConfiguraciones()}),p(),e(4,"svg",4),c(5,"path",5)(6,"path",6)(7,"path",7)(8,"path",8),n()(),u(),e(9,"h1",9),r(10,"Roles del Sistema"),n()(),e(11,"button",10),x("click",function(){return s.registrarRol()}),p(),e(12,"svg",11),c(13,"path",12),n(),r(14," Nuevo Rol "),n()(),u(),e(15,"div",13),c(16,"input",14),n(),e(17,"div",15),h(18,G,6,0,"div",16)(19,Y,9,1,"div",16)(20,K,3,3,"div",17),n()()),t&2&&(l(18),d("ngIf",s.isLoading),l(),d("ngIf",!s.isLoading&&s.errorMessage),l(),d("ngIf",!s.isLoading&&!s.errorMessage))},dependencies:[F,j,B,D,H],styles:["*[_ngcontent-%COMP%]{transition:all .2s ease-in-out}tr[_ngcontent-%COMP%]:hover{transform:scale(1.005);box-shadow:0 2px 8px #0000001a}.status-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){table[_ngcontent-%COMP%]{min-width:700px}.overflow-x-auto[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;scrollbar-width:thin}tr[_ngcontent-%COMP%]:hover, button[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none}}.bg-white[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #fb923c1a;border-color:#f97316}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}"]})};export{$ as ListaRolesPage};
