import{d as j}from"./chunk-TFTKUNPW.js";import{a as B,c as N,d as G,e as H,f as z,g as D,k as A,l as W,m as q,o as Y,p as Q,q as J,s as K}from"./chunk-KE2X6HN6.js";import{a as U}from"./chunk-PDEKQBO5.js";import"./chunk-I36WQ6MU.js";import"./chunk-PIYG2HY2.js";import{i as T,n as I}from"./chunk-6Y6W3DZI.js";import{Fa as O,Ka as v,R as M,Ta as d,Ua as e,Va as t,W as c,Wa as u,X as g,Y as p,Z as x,ab as S,db as f,fb as h,gb as k,hb as _,jb as n,kb as y,l as V,lb as F,nb as C,ob as P,p as L,pb as E,ra as a,x as R}from"./chunk-NRNLENJO.js";var w=class{id=0;descripcion="";estado=0};function Z(r,m){if(r&1&&(e(0,"div",61)(1,"div",62),p(),e(2,"svg",63),u(3,"path",64),t(),x(),e(4,"p",65),n(5),t()()()),r&2){let o=h();a(5),y(o.errorMessage)}}function $(r,m){if(r&1&&(e(0,"div",66)(1,"div",62),p(),e(2,"svg",67),u(3,"path",68),t(),x(),e(4,"p",69),n(5),t()()()),r&2){let o=h();a(5),y(o.successMessage)}}function ee(r,m){r&1&&(e(0,"span",70),n(1," Este campo es obligatorio "),t())}function te(r,m){r&1&&(e(0,"span",70),n(1," M\xEDnimo 3 caracteres "),t())}function ie(r,m){r&1&&(e(0,"span",70),n(1," M\xE1ximo 100 caracteres "),t())}function ne(r,m){r&1&&(e(0,"span",71),n(1," V\xE1lido "),t())}function re(r,m){r&1&&(p(),e(0,"svg",72),u(1,"circle",73)(2,"path",74),t())}function ae(r,m){r&1&&(p(),e(0,"svg",52),u(1,"path",75),t())}function oe(r,m){if(r&1){let o=S();e(0,"div",76),f("click",function(){c(o);let l=h();return g(l.cerrarModal())}),e(1,"div",77),f("click",function(l){return c(o),g(l.stopPropagation())}),e(2,"div",78)(3,"div",79),p(),e(4,"svg",80),u(5,"path",68),t()()(),x(),e(6,"h2",81),n(7," \xA1Familia Registrada! "),t(),e(8,"p",82),n(9),t(),e(10,"div",83)(11,"button",84),f("click",function(){c(o);let l=h();return g(l.cerrarModal())}),n(12," Registrar Otra "),t(),e(13,"button",85),f("click",function(){c(o);let l=h();return g(l.cerrarModalYVolver())}),p(),e(14,"svg",86),u(15,"path",87),t(),n(16," Ver Lista "),t()()()()}if(r&2){let o=h();a(9),F(" ",o.modalMessage," ")}}var X=class r{router=M(j);familiasService=M(U);newFamilia=new w;isLoading=!1;errorMessage="";successMessage="";showSuccessModal=!1;modalMessage="";constructor(){this.newFamilia.estado=1}guardarFamilia(){if(!this.validarFormulario())return;this.isLoading=!0,this.errorMessage="";let m={id:0,descripcion:this.newFamilia.descripcion.trim(),estado:this.newFamilia.estado};this.familiasService.registrarFamilia(m).pipe(L(1e4),R(o=>(console.error("Error al registrar familia:",o),this.errorMessage="Error al conectar con el servidor. Por favor, int\xE9ntelo de nuevo.",V(null)))).subscribe({next:o=>{this.isLoading=!1,o&&o.exito?(this.modalMessage=`La familia "${m.descripcion}" ha sido registrada exitosamente.`,this.showSuccessModal=!0):this.errorMessage=o?.mensaje||"Error al guardar la familia. Por favor, int\xE9ntelo de nuevo."},error:o=>{this.isLoading=!1,this.errorMessage="Error al guardar la familia. Por favor, int\xE9ntelo de nuevo.",console.error("Error en la suscripci\xF3n:",o)}})}validarFormulario(){return!this.newFamilia.descripcion||this.newFamilia.descripcion.trim().length<3?(this.errorMessage="La descripci\xF3n de la familia debe tener al menos 3 caracteres.",!1):this.newFamilia.descripcion.trim().length>100?(this.errorMessage="La descripci\xF3n de la familia no puede exceder los 100 caracteres.",!1):!0}limpiarFormulario(){this.newFamilia=new w,this.newFamilia.estado=1,this.errorMessage="",this.successMessage=""}cancelarRegistro(){this.router.navigate(["/lista-familia"])}volverCatalogos(){this.router.navigate(["/lista-familia"])}cerrarModal(){this.showSuccessModal=!1,this.limpiarFormulario()}cerrarModalYVolver(){this.showSuccessModal=!1,this.router.navigate(["/lista-familia"])}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=O({type:r,selectors:[["app-registro-familia-page"]],decls:87,vars:33,consts:[["familiaForm","ngForm"],["descripcionInput","ngModel"],[1,"flex","flex-col","min-h-screen","bg-white","p-2","sm:p-4","md:p-8"],[1,"flex","items-center","justify-between","pb-4","md:pb-6","border-b","border-gray-300","flex-none"],[1,"flex","items-center","gap-2","md:gap-4"],[1,"bg-orange-600","text-white","rounded-full","p-2","h-8","w-8","md:h-10","md:w-10","flex","items-center","justify-center","hover:bg-orange-700","transition","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","md:w-5","md:h-5"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M5 12l14 0"],["d","M5 12l4 4"],["d","M5 12l4 -4"],[1,"text-lg","sm:text-xl","md:text-2xl","lg:text-3xl","font-extrabold","text-gray-900"],[1,"hidden","sm:inline"],[1,"sm:hidden"],["class","mt-4 md:mt-6 p-4 bg-red-100 border border-red-300 rounded-lg shadow-sm",4,"ngIf"],["class","mt-4 md:mt-6 p-4 bg-green-100 border border-green-300 rounded-lg shadow-sm",4,"ngIf"],[1,"mt-4","md:mt-8","space-y-4","md:space-y-8","bg-gray-50","p-3","md:p-8","rounded-xl","shadow-2xl",3,"ngSubmit"],[1,"grid","grid-cols-1","lg:grid-cols-12","gap-4","md:gap-8"],[1,"lg:col-span-4","flex","flex-col","space-y-4","md:space-y-6","p-3","md:p-6","bg-gradient-to-br","from-orange-50","to-orange-100","rounded-xl","shadow-lg","border-l-4","border-orange-600"],[1,"text-lg","md:text-xl","font-extrabold","text-orange-600","border-b-2","border-orange-300","pb-2","w-full","text-center","lg:text-left"],[1,"flex","justify-center","lg:justify-start"],[1,"relative","h-20","w-20","md:h-32","md:w-32","rounded-full","bg-gradient-to-br","from-orange-400","to-orange-600","flex","items-center","justify-center","shadow-lg","family-icon"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","md:w-16","md:h-16","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3"],[1,"flex","items-start"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","md:w-5","md:h-5","text-blue-600","mr-2","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-blue-800","text-xs","md:text-sm","font-medium"],[1,"text-blue-700","text-xs","md:text-sm","mt-1"],[1,"lg:col-span-8","space-y-4","md:space-y-6"],[1,"bg-white","p-3","md:p-6","rounded-lg","border","border-gray-200","shadow-sm"],[1,"text-lg","md:text-xl","font-bold","text-gray-800","mb-3","md:mb-6","pb-2","md:pb-3","border-b","border-orange-100"],[1,"space-y-4","md:space-y-6"],["for","descripcion",1,"block","text-xs","md:text-sm","font-bold","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","id","descripcion","name","descripcion","required","","minlength","3","maxlength","100","placeholder","Ej: Electr\xF3nicos, Ropa, Hogar, Deportes...",1,"w-full","px-3","md:px-4","py-2.5","md:py-3","border-2","border-gray-300","rounded-xl","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-200","text-sm","md:text-base",3,"ngModelChange","ngModel"],[1,"flex","justify-between","mt-2"],[1,"text-xs"],["class","text-red-500 font-medium",4,"ngIf"],["class","text-green-500 font-medium",4,"ngIf"],[1,"text-xs","character-counter"],["for","estado",1,"block","text-xs","md:text-sm","font-bold","text-gray-700","mb-2"],["id","estado","name","estado",1,"w-full","px-3","md:px-4","py-2.5","md:py-3","border-2","border-gray-300","rounded-xl","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","bg-white","transition-all","duration-200","text-sm","md:text-base",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"text-xs","text-gray-500","mt-1"],[1,"pt-4","md:pt-6","border-t","border-gray-200","space-y-3","md:space-y-0"],[1,"hidden","md:flex","md:justify-start"],["type","button",1,"px-6","py-2","border","border-gray-300","text-gray-700","font-medium","rounded-lg","hover:bg-gray-50","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed","text-sm",3,"click","disabled"],[1,"flex","flex-col","space-y-3","md:flex-row","md:space-y-0","md:space-x-4","md:justify-end"],["type","button",1,"mobile-button","form-button","w-full","md:w-auto","order-2","md:order-1","px-6","py-3","border-2","border-gray-300","text-gray-700","font-semibold","rounded-xl","hover:bg-gray-50","hover:border-gray-400","desktop-hover","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","text-base","md:text-sm","min-h-[48px]","md:min-h-[44px]","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2",3,"click","disabled"],[1,"flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6m0 12L6 6"],[1,"truncate"],["type","submit",1,"mobile-button","form-button","loading-button","w-full","md:w-auto","order-1","md:order-2","px-6","py-3","bg-gradient-to-r","from-orange-600","to-orange-700","text-white","font-bold","rounded-xl","hover:from-orange-700","hover:to-orange-800","desktop-hover","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none","shadow-lg","hover:shadow-xl","text-base","md:text-sm","min-h-[48px]","md:min-h-[44px]","focus:ring-2","focus:ring-orange-300","focus:ring-offset-2",3,"disabled"],["class","animate-spin w-5 h-5 mr-2 text-white flex-shrink-0","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","w-5 h-5 mr-2 flex-shrink-0","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"md:hidden","flex","justify-center"],["type","button",1,"text-gray-500","hover:text-gray-700","font-medium","text-sm","underline","disabled:opacity-50",3,"click","disabled"],["class","fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50 p-4",3,"click",4,"ngIf"],[1,"mt-4","md:mt-6","p-4","bg-red-100","border","border-red-300","rounded-lg","shadow-sm"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-800","font-medium","text-sm","md:text-base"],[1,"mt-4","md:mt-6","p-4","bg-green-100","border","border-green-300","rounded-lg","shadow-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","font-medium","text-sm","md:text-base"],[1,"text-red-500","font-medium"],[1,"text-green-500","font-medium"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-5","h-5","mr-2","text-white","flex-shrink-0"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"],[1,"fixed","inset-0","bg-black/50","bg-opacity-50","flex","items-center","justify-center","z-50","p-4",3,"click"],[1,"bg-white","rounded-xl","shadow-2xl","p-4","md:p-8","max-w-md","w-full","mx-auto","transform","transition-all","duration-300",3,"click"],[1,"flex","justify-center","mb-4","md:mb-6"],[1,"bg-green-100","rounded-full","p-3","md:p-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","md:w-12","md:h-12","text-green-600"],[1,"text-xl","md:text-2xl","font-bold","text-gray-900","text-center","mb-3","md:mb-4"],[1,"text-gray-600","text-center","mb-6","md:mb-8","leading-relaxed","text-sm","md:text-base"],[1,"flex","flex-col","gap-2","md:flex-row","md:gap-3"],[1,"w-full","px-4","md:px-6","py-2.5","md:py-3","border","border-gray-300","text-gray-700","font-semibold","rounded-lg","hover:bg-gray-50","transition","duration-150","text-sm",3,"click"],[1,"w-full","px-4","md:px-6","py-2.5","md:py-3","bg-orange-600","text-white","font-semibold","rounded-lg","hover:bg-orange-700","transition","duration-150","flex","items-center","justify-center","text-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"]],template:function(o,i){if(o&1){let l=S();e(0,"div",2)(1,"div",3)(2,"div",4)(3,"button",5),f("click",function(){return c(l),g(i.volverCatalogos())}),p(),e(4,"svg",6),u(5,"path",7)(6,"path",8)(7,"path",9)(8,"path",10),t()(),x(),e(9,"h1",11)(10,"span",12),n(11,"Registrar Nueva Familia"),t(),e(12,"span",13),n(13,"Nueva Familia"),t()()()(),v(14,Z,6,1,"div",14)(15,$,6,1,"div",15),e(16,"form",16,0),f("ngSubmit",function(){return c(l),g(i.guardarFamilia())}),e(18,"div",17)(19,"div",18)(20,"h2",19),n(21," Informaci\xF3n de la Familia "),t(),e(22,"div",20)(23,"div",21),p(),e(24,"svg",22),u(25,"path",23),t()()(),x(),e(26,"div",24)(27,"div",25),p(),e(28,"svg",26),u(29,"path",27),t(),x(),e(30,"div")(31,"p",28)(32,"strong"),n(33,"\xBFQu\xE9 es una familia de productos?"),t()(),e(34,"p",29),n(35," Las familias agrupan productos similares para una mejor organizaci\xF3n y b\xFAsqueda en el inventario. "),t()()()()(),e(36,"div",30)(37,"div",31)(38,"h2",32),n(39," \u270F\uFE0F Datos de la Familia "),t(),e(40,"div",33)(41,"div")(42,"label",34),n(43," Nombre de la Familia de Productos "),e(44,"span",35),n(45,"*"),t()(),e(46,"input",36,1),E("ngModelChange",function(b){return c(l),P(i.newFamilia.descripcion,b)||(i.newFamilia.descripcion=b),g(b)}),t(),e(48,"div",37)(49,"div",38),v(50,ee,2,0,"span",39)(51,te,2,0,"span",39)(52,ie,2,0,"span",39)(53,ne,2,0,"span",40),t(),e(54,"span",41),n(55),t()()(),e(56,"div")(57,"label",42),n(58," Estado de la Familia "),t(),e(59,"select",43),E("ngModelChange",function(b){return c(l),P(i.newFamilia.estado,b)||(i.newFamilia.estado=b),g(b)}),e(60,"option",44),n(61,"Activo"),t(),e(62,"option",44),n(63,"Inactivo"),t()(),e(64,"p",45),n(65," Solo las familias activas aparecer\xE1n disponibles para asignar a productos "),t()()()()()(),e(66,"div",46)(67,"div",47)(68,"button",48),f("click",function(){return c(l),g(i.limpiarFormulario())}),n(69," \u{1F5D1}\uFE0F Limpiar Formulario "),t()(),e(70,"div",49)(71,"button",50),f("click",function(){return c(l),g(i.cancelarRegistro())}),e(72,"span",51),p(),e(73,"svg",52),u(74,"path",53),t(),x(),e(75,"span",54),n(76,"Cancelar"),t()()(),e(77,"button",55)(78,"span",51),v(79,re,3,0,"svg",56)(80,ae,2,0,"svg",57),e(81,"span",54),n(82),t()()()(),e(83,"div",58)(84,"button",59),f("click",function(){return c(l),g(i.limpiarFormulario())}),n(85," Limpiar formulario "),t()()()()(),v(86,oe,17,1,"div",60)}if(o&2){let l=k(17),s=k(47);a(14),d("ngIf",i.errorMessage),a(),d("ngIf",i.successMessage),a(31),C("ngModel",i.newFamilia.descripcion),a(4),d("ngIf",(s.errors==null?null:s.errors.required)&&s.touched),a(),d("ngIf",(s.errors==null?null:s.errors.minlength)&&s.touched),a(),d("ngIf",s.errors==null?null:s.errors.maxlength),a(),d("ngIf",s.valid&&s.touched),a(),_("warning",(i.newFamilia.descripcion||"").length>80)("danger",(i.newFamilia.descripcion||"").length>95)("text-gray-400",(i.newFamilia.descripcion||"").length<=80),a(),F(" ",(i.newFamilia.descripcion||"").length,"/100 "),a(4),C("ngModel",i.newFamilia.estado),a(),d("ngValue",1),a(2),d("ngValue",0),a(6),d("disabled",i.isLoading),a(3),_("invalid",i.isLoading),d("disabled",i.isLoading),a(6),_("invalid",!l.valid&&!i.isLoading)("valid",l.valid&&!i.isLoading)("is-loading",i.isLoading),d("disabled",!l.valid||i.isLoading),a(2),d("ngIf",i.isLoading),a(),d("ngIf",!i.isLoading),a(2),y(i.isLoading?"Guardando...":"Guardar Familia"),a(2),d("disabled",i.isLoading),a(2),d("ngIf",i.showSuccessModal)}},dependencies:[K,D,W,q,B,A,N,G,Y,Q,J,z,H,I,T],styles:['.mobile-button[_ngcontent-%COMP%]{position:relative;touch-action:manipulation;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;user-select:none}@media (max-width: 768px){.mobile-button[_ngcontent-%COMP%]{min-height:48px;font-weight:600;letter-spacing:.025em}.mobile-button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98);transition:transform .1s ease}.button-container[_ngcontent-%COMP%]{padding:16px 0;gap:12px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:16px!important;-webkit-appearance:none;appearance:none}button[_ngcontent-%COMP%]:disabled{opacity:.6;filter:grayscale(.3);pointer-events:none}@media (max-width: 375px){.mobile-button[_ngcontent-%COMP%]{font-size:14px;padding-left:16px;padding-right:16px}}}@media (min-width: 769px) and (max-width: 1024px){.mobile-button[_ngcontent-%COMP%]{min-height:44px;font-size:14px}}@media (min-width: 769px){.desktop-hover[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 10px 15px -3px #0000001a}}.loading-button[_ngcontent-%COMP%]{position:relative;overflow:hidden}.loading-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.loading-button.is-loading[_ngcontent-%COMP%]:before{left:100%}.form-button[_ngcontent-%COMP%]:focus{outline:2px solid #f97316;outline-offset:2px}.form-button.invalid[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.form-button.valid[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #22c55e33}.family-form-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff7ed,#fed7aa)}.family-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-orange 2s infinite}@keyframes _ngcontent-%COMP%_pulse-orange{0%,to{transform:scale(1);box-shadow:0 0 #fb923cb3}50%{transform:scale(1.05);box-shadow:0 0 0 10px #fb923c00}}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#f97316;box-shadow:0 0 0 3px #f973161a}.character-counter[_ngcontent-%COMP%]{transition:color .3s ease}.character-counter.warning[_ngcontent-%COMP%]{color:#f59e0b}.character-counter.danger[_ngcontent-%COMP%]{color:#ef4444}']})};export{X as RegistroFamiliaPage};
