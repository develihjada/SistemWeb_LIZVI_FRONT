import{a as D}from"./chunk-XDWJ5BTG.js";import{d as k}from"./chunk-TFTKUNPW.js";import{a as C,b as g,c as P,d as L,g as j,i as I,j as N,k as O,l as T,m as G,r as F,t as V}from"./chunk-KE2X6HN6.js";import"./chunk-I36WQ6MU.js";import"./chunk-PIYG2HY2.js";import{e as _,i as E,n as S}from"./chunk-6Y6W3DZI.js";import{Fa as R,Ka as u,R as h,Ta as l,Ua as e,Va as t,Wa as d,Y as m,Z as p,db as b,fb as f,hb as v,jb as n,kb as w,l as y,lb as x,ra as a,x as M}from"./chunk-NRNLENJO.js";function B(s,o){if(s&1&&(e(0,"div",47)(1,"div",48),m(),e(2,"svg",49),d(3,"path",50),t(),p(),e(4,"p",51),n(5),t()()()),s&2){let r=f();a(5),w(r.errorMessage)}}function A(s,o){if(s&1&&(e(0,"div",52)(1,"div",48),m(),e(2,"svg",53),d(3,"path",54),t(),p(),e(4,"p",55),n(5),t()()()),s&2){let r=f();a(5),w(r.successMessage)}}function H(s,o){if(s&1&&(e(0,"div",56),n(1),t()),s&2){let r=f();a(),x(" ",r.getErrorMessage("nombre")," ")}}function z(s,o){if(s&1&&(e(0,"div",56),n(1),t()),s&2){let r=f();a(),x(" ",r.getErrorMessage("descripcion")," ")}}function $(s,o){if(s&1&&(e(0,"div",56),n(1),t()),s&2){let r=f();a(),x(" ",r.getErrorMessage("estado")," ")}}function Y(s,o){s&1&&d(0,"div",57)}function Q(s,o){s&1&&(m(),e(0,"svg",42),d(1,"path",58),t())}var q=class s{fb;location;router;api;formRegistro;isLoading=!1;errorMessage=null;successMessage=null;constructor(){this.fb=h(F),this.location=h(_),this.router=h(k),this.api=h(D),this.formRegistro=this.fb.group({nombre:["",[g.required,g.minLength(2),g.maxLength(100)]],descripcion:["",[g.required,g.minLength(5),g.maxLength(255)]],estado:[1,[g.required]]})}registrarRol(){if(this.formRegistro.valid){this.errorMessage=null,this.successMessage=null,this.isLoading=!0;let o={nombre:this.formRegistro.value.nombre.trim(),descripcion:this.formRegistro.value.descripcion.trim(),estado:this.formRegistro.value.estado};this.api.registroRol(o).pipe(M(c=>(this.errorMessage="No se pudo conectar al servidor. Revisa tu red o int\xE9ntalo m\xE1s tarde.",y({exito:!1,mensaje:"Error de conexi\xF3n"})))).subscribe({next:c=>{c.exito?(this.successMessage="Rol registrado exitosamente",this.formRegistro.reset(),this.formRegistro.patchValue({estado:1}),setTimeout(()=>{this.volverLista()},2e3)):this.errorMessage=c.mensaje||"No se pudo registrar el rol"},error:c=>{this.errorMessage=this.errorMessage??"No se pudo registrar el rol."}}).add(()=>{this.isLoading=!1})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.formRegistro.controls).forEach(o=>{this.formRegistro.get(o)?.markAsTouched()})}hasError(o){let r=this.formRegistro.get(o);return!!(r&&r.invalid&&r.touched)}getErrorMessage(o){let r=this.formRegistro.get(o);if(r?.errors){if(r.errors.required)return`${this.getFieldDisplayName(o)} es requerido`;if(r.errors.minlength)return`${this.getFieldDisplayName(o)} debe tener al menos ${r.errors.minlength.requiredLength} caracteres`;if(r.errors.maxlength)return`${this.getFieldDisplayName(o)} no puede exceder ${r.errors.maxlength.requiredLength} caracteres`}return""}getFieldDisplayName(o){return{nombre:"El nombre",descripcion:"La descripci\xF3n",estado:"El estado"}[o]||o}volverLista(){this.router.navigate(["/lista-roles"])}volverAtras(){this.router.navigate(["/lista-roles"])}static \u0275fac=function(r){return new(r||s)};static \u0275cmp=R({type:s,selectors:[["app-registro-roles-page"]],decls:71,vars:23,consts:[[1,"flex","flex-col","min-h-screen","bg-white","p-2","sm:p-4","md:p-8"],[1,"flex","items-center","justify-between","pb-4","md:pb-6","border-b","border-gray-300","flex-none"],[1,"flex","items-center","gap-2","md:gap-4"],[1,"bg-orange-600","text-white","rounded-full","p-2","h-8","w-8","md:h-10","md:w-10","flex","items-center","justify-center","hover:bg-orange-700","transition","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","md:w-5","md:h-5"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M5 12l14 0"],["d","M5 12l4 4"],["d","M5 12l4 -4"],[1,"text-lg","sm:text-xl","md:text-2xl","lg:text-3xl","font-extrabold","text-gray-900"],[1,"hidden","sm:inline"],[1,"sm:hidden"],["class","mt-4 md:mt-6 p-4 bg-red-100 border border-red-300 rounded-lg shadow-sm",4,"ngIf"],["class","mt-4 md:mt-6 p-4 bg-green-100 border border-green-300 rounded-lg shadow-sm",4,"ngIf"],[1,"mt-4","md:mt-8","space-y-4","md:space-y-8","bg-gray-50","p-3","md:p-8","rounded-xl","shadow-2xl",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","lg:grid-cols-12","gap-4","md:gap-8"],[1,"lg:col-span-4","flex","flex-col","space-y-4","md:space-y-6","p-3","md:p-6","bg-gradient-to-br","from-orange-50","to-orange-100","rounded-xl","shadow-lg","border-l-4","border-orange-600"],[1,"text-lg","md:text-xl","font-extrabold","text-orange-600","border-b-2","border-orange-300","pb-2","w-full","text-center","lg:text-left"],[1,"flex","justify-center","lg:justify-start"],[1,"relative","h-20","w-20","md:h-32","md:w-32","rounded-full","bg-gradient-to-br","from-orange-400","to-orange-600","flex","items-center","justify-center","shadow-lg","family-icon"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","md:w-16","md:h-16","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-3"],[1,"flex","items-start"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","md:w-5","md:h-5","text-blue-600","mr-2","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-blue-800","text-xs","md:text-sm","font-medium"],[1,"text-blue-700","text-xs","md:text-sm","mt-1"],[1,"lg:col-span-8","space-y-4","md:space-y-6"],[1,"bg-white","p-3","md:p-6","rounded-lg","shadow-md","border-l-4","border-orange-600"],["for","nombre",1,"block","text-sm","md:text-base","font-semibold","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","id","nombre","formControlName","nombre","placeholder","Ej: Administrador, Usuario, Vendedor",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-200","text-sm","md:text-base"],["class","mt-2 text-sm text-red-600 font-medium",4,"ngIf"],["for","descripcion",1,"block","text-sm","md:text-base","font-semibold","text-gray-700","mb-2"],["id","descripcion","formControlName","descripcion","rows","4","placeholder","Describe las funciones y permisos de este rol...",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-200","resize-none","text-sm","md:text-base"],["for","estado",1,"block","text-sm","md:text-base","font-semibold","text-gray-700","mb-2"],["id","estado","formControlName","estado",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-lg","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-200","text-sm","md:text-base"],["value","1"],["value","0"],[1,"mt-6","md:mt-8","flex","flex-col","sm:flex-row","gap-3","sm:gap-4","justify-center","sm:justify-end","bg-white","p-4","md:p-6","rounded-xl","shadow-lg"],["type","button",1,"w-full","sm:w-auto","px-6","py-3","bg-gray-400","text-white","font-bold","rounded-lg","hover:bg-gray-500","transition","duration-200","shadow-md","disabled:opacity-50","flex","items-center","justify-center",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["type","submit",1,"w-full","sm:w-auto","px-6","py-3","bg-orange-600","text-white","font-bold","rounded-lg","hover:bg-orange-700","transition","duration-200","shadow-md","disabled:opacity-50","flex","items-center","justify-center",3,"disabled"],["class","animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2",4,"ngIf"],["class","w-5 h-5 mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"mt-4","md:mt-6","p-4","bg-red-100","border","border-red-300","rounded-lg","shadow-sm"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-800","font-medium","text-sm","md:text-base"],[1,"mt-4","md:mt-6","p-4","bg-green-100","border","border-green-300","rounded-lg","shadow-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","font-medium","text-sm","md:text-base"],[1,"mt-2","text-sm","text-red-600","font-medium"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-white","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(r,i){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),b("click",function(){return i.volverAtras()}),m(),e(4,"svg",4),d(5,"path",5)(6,"path",6)(7,"path",7)(8,"path",8),t()(),p(),e(9,"h1",9)(10,"span",10),n(11,"Registrar Nuevo Rol"),t(),e(12,"span",11),n(13,"Nuevo Rol"),t()()()(),u(14,B,6,1,"div",12)(15,A,6,1,"div",13),e(16,"form",14),b("ngSubmit",function(){return i.registrarRol()}),e(17,"div",15)(18,"div",16)(19,"h2",17),n(20," Informaci\xF3n del Rol "),t(),e(21,"div",18)(22,"div",19),m(),e(23,"svg",20),d(24,"path",21),t()()(),p(),e(25,"div",22)(26,"div",23),m(),e(27,"svg",24),d(28,"path",25),t(),p(),e(29,"div")(30,"p",26)(31,"strong"),n(32,"\xBFQu\xE9 es un rol?"),t()(),e(33,"p",27),n(34," Los roles definen los permisos y accesos que tendr\xE1n los usuarios en el sistema (ej: Administrador, Vendedor, Cajero). "),t()()()()(),e(35,"div",28)(36,"div",29)(37,"label",30),n(38," Nombre del Rol "),e(39,"span",31),n(40,"*"),t()(),d(41,"input",32),u(42,H,2,1,"div",33),t(),e(43,"div",29)(44,"label",34),n(45," Descripci\xF3n "),e(46,"span",31),n(47,"*"),t()(),e(48,"textarea",35),n(49,"                    "),t(),u(50,z,2,1,"div",33),t(),e(51,"div",29)(52,"label",36),n(53," Estado "),e(54,"span",31),n(55,"*"),t()(),e(56,"select",37)(57,"option",38),n(58,"Activo"),t(),e(59,"option",39),n(60,"Inactivo"),t()(),u(61,$,2,1,"div",33),t()()(),e(62,"div",40)(63,"button",41),b("click",function(){return i.volverAtras()}),m(),e(64,"svg",42),d(65,"path",43),t(),n(66," Volver "),t(),p(),e(67,"button",44),u(68,Y,1,0,"div",45)(69,Q,2,0,"svg",46),n(70),t()()()()),r&2&&(a(14),l("ngIf",i.errorMessage),a(),l("ngIf",i.successMessage),a(),l("formGroup",i.formRegistro),a(25),v("border-red-500",i.hasError("nombre"))("bg-red-50",i.hasError("nombre")),a(),l("ngIf",i.hasError("nombre")),a(6),v("border-red-500",i.hasError("descripcion"))("bg-red-50",i.hasError("descripcion")),a(2),l("ngIf",i.hasError("descripcion")),a(6),v("border-red-500",i.hasError("estado"))("bg-red-50",i.hasError("estado")),a(5),l("ngIf",i.hasError("estado")),a(2),l("disabled",i.isLoading),a(4),l("disabled",i.isLoading||i.formRegistro.invalid),a(),l("ngIf",i.isLoading),a(),l("ngIf",!i.isLoading),a(),x(" ",i.isLoading?"Guardando...":"Guardar Rol"," "))},dependencies:[S,E,V,j,T,G,C,O,P,L,I,N],styles:[".family-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_gentle-bounce 3s ease-in-out infinite;transition:transform .3s ease-in-out}.family-icon[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@keyframes _ngcontent-%COMP%_gentle-bounce{0%,50%,to{transform:translateY(0)}25%{transform:translateY(-5px)}75%{transform:translateY(-2px)}}.bg-white[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-up .5s ease-out}.bg-white[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.bg-white[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.bg-white[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}@keyframes _ngcontent-%COMP%_slide-in-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{transform:scale(1.02);box-shadow:0 8px 25px #fb923c26}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}*[_ngcontent-%COMP%]{transition:all .2s ease-in-out}@media (max-width: 1024px){.family-icon[_ngcontent-%COMP%]{animation-duration:2s}}@media (max-width: 640px){.family-icon[_ngcontent-%COMP%], .bg-white[_ngcontent-%COMP%]{animation:none}}"]})};export{q as RegistroRolesPage};
