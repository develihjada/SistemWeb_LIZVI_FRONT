import{a as R}from"./chunk-OABUGHAJ.js";import{d as O}from"./chunk-TFTKUNPW.js";import"./chunk-I36WQ6MU.js";import"./chunk-PIYG2HY2.js";import{e as j,g as B,h as D,i as H,j as F,n as N}from"./chunk-6Y6W3DZI.js";import{$a as C,Fa as M,Ka as b,R as h,Ta as c,Ua as e,Va as i,W as f,Wa as d,X as _,Y as m,Z as x,_a as L,ab as w,db as g,fb as p,i as y,jb as r,kb as v,l as S,lb as I,p as k,q as U,ra as l,ub as T,vb as V,wb as P,x as E}from"./chunk-NRNLENJO.js";var $=(n,a,t)=>({"bg-green-100 text-green-800":n,"bg-red-100 text-red-800":a,"bg-gray-100 text-gray-800":t});function A(n,a){n&1&&(e(0,"div",18)(1,"div",19),m(),e(2,"svg",20),d(3,"circle",21)(4,"path",22),i(),r(5," Cargando usuarios... "),i()())}function G(n,a){if(n&1){let t=w();e(0,"div",18)(1,"div",23)(2,"div",24),m(),e(3,"svg",25),d(4,"path",26),i(),x(),e(5,"p",27),r(6),i()(),e(7,"button",28),g("click",function(){f(t);let o=p();return _(o.listarUsuarios())}),r(8," Reintentar "),i()()()}if(n&2){let t=p();l(6),v(t.errorMessage)}}function q(n,a){if(n&1){let t=w();e(0,"tr",38)(1,"td",39),r(2),i(),e(3,"td",40)(4,"div",41),r(5),i(),e(6,"div",42),r(7,"Usuario del sistema"),i()(),e(8,"td",40)(9,"div",43),r(10),i()(),e(11,"td",40)(12,"div",44),r(13),i()(),e(14,"td",45)(15,"span",46),r(16),i()(),e(17,"td",47)(18,"div",48)(19,"button",49),g("click",function(){let o=f(t).$implicit,u=p(3);return _(u.editarUsuario(o.id))}),m(),e(20,"svg",50),d(21,"path",51),i()(),x(),e(22,"button",52),g("click",function(){let o=f(t).$implicit,u=p(3);return _(u.eliminarUsuario(o.id))}),m(),e(23,"svg",50),d(24,"path",53),i()()()()()}if(n&2){let t=a.$implicit;l(2),v(t.id),l(3),v(t.nombre),l(5),v(t.email),l(3),v(t.rolNombre||"Sin rol asignado"),l(2),c("ngClass",T(6,$,t.estado===1,t.estado===0,t.estado!==0&&t.estado!==1)),l(),I(" ",t.estado===1?"Activo":t.estado===0?"Inactivo":"Desconocido"," ")}}function J(n,a){if(n&1){let t=w();e(0,"tr")(1,"td",54)(2,"div",55),m(),e(3,"svg",56),d(4,"path",57),i(),x(),e(5,"h3",58),r(6,"No hay usuarios registrados"),i(),e(7,"p",59),r(8,"Comienza creando tu primer usuario del sistema"),i(),e(9,"button",60),g("click",function(){f(t);let o=p(3);return _(o.registrarUsuario())}),r(10," Crear Usuario "),i()()()()}}function K(n,a){if(n&1&&(L(0),e(1,"table",31)(2,"thead",32)(3,"tr")(4,"th",33),r(5,"ID"),i(),e(6,"th",33),r(7,"Usuario"),i(),e(8,"th",33),r(9,"Email"),i(),e(10,"th",33),r(11,"Rol"),i(),e(12,"th",34),r(13,"Estado"),i(),e(14,"th",35),r(15,"Acciones"),i()()(),e(16,"tbody",36),b(17,q,25,10,"tr",37)(18,J,11,0,"tr",30),i()(),C()),n&2){let t=a.ngIf,s=p(2);l(17),c("ngForOf",t)("ngForTrackBy",s.trackByFn),l(),c("ngIf",t.length===0)}}function Q(n,a){if(n&1&&(e(0,"div",29),b(1,K,19,3,"ng-container",30),V(2,"async"),i()),n&2){let t=p();l(),c("ngIf",P(2,1,t.usuariosData$))}}var z=class n{location;router;api;isLoading=!1;initialLoadDone=!1;errorMessage=null;usuariosSubject=new y([]);usuariosData$=this.usuariosSubject.asObservable();constructor(){this.location=h(j),this.router=h(O),this.api=h(R)}ngOnInit(){this.listarUsuarios()}listarUsuarios(){this.errorMessage=null,this.isLoading=!0;let a={estado:2};this.api.listaUsuarios(a).pipe(k({each:7e3}),U(o=>o.exito?o.usuario:[]),E(o=>(this.errorMessage="No se pudo conectar al servidor. Revisa tu red o int\xE9ntalo m\xE1s tarde.",S([])))).subscribe({next:o=>{let u=[];Array.isArray(o)?u=o:o&&typeof o=="object"?u=[o]:u=[],this.usuariosSubject.next(u),this.initialLoadDone=!0},error:o=>{this.errorMessage=this.errorMessage??"No se pudo conectar al servidor."}}).add(()=>{this.isLoading=!1})}volverInicio(){this.router.navigate(["/inicio"])}registrarUsuario(){this.router.navigate(["/usuarios/registro"])}editarUsuario(a){}eliminarUsuario(a){confirm(`\xBFEst\xE1s seguro de eliminar el usuario con ID ${a}?`)}volverConfiguraciones(){this.router.navigate(["/configuraciones"])}trackByFn(a,t){return t.id}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=M({type:n,selectors:[["app-lista-usuarios-page"]],decls:21,vars:3,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-50","p-4","sm:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","pb-6","border-b","border-gray-300","flex-none"],[1,"flex","items-center","gap-4","mb-4","md:mb-0"],[1,"bg-orange-600","text-white","rounded-full","p-2","h-10","w-10","flex","items-center","justify-center","hover:bg-orange-700","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M5 12l14 0"],["d","M5 12l4 4"],["d","M5 12l4 -4"],[1,"text-3xl","font-extrabold","text-gray-900"],[1,"w-full","md:w-auto","px-6","py-3","bg-orange-600","text-white","font-semibold","rounded-lg","shadow-md","hover:bg-orange-700","transition","duration-150","flex","items-center","justify-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mt-6","bg-white","p-4","rounded-lg","shadow-md"],["type","text","placeholder","Buscar por nombre de usuario, email o ID...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-orange-600","focus:border-orange-600","transition"],[1,"mt-8","flex-grow","overflow-x-auto","bg-white","rounded-lg","shadow-md"],["class","p-8 text-center",4,"ngIf"],["class","p-4",4,"ngIf"],[1,"p-8","text-center"],[1,"inline-flex","items-center","px-4","py-2","font-semibold","leading-6","text-sm","shadow","rounded-md","text-orange-500","bg-orange-100","transition","ease-in-out","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-orange-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-700","font-medium"],[1,"mt-4","px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition","duration-150",3,"click"],[1,"p-4"],[4,"ngIf"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-200"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-center","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors duration-150",4,"ngFor","ngForOf","ngForTrackBy"],[1,"hover:bg-gray-50","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-semibold","text-gray-800"],[1,"text-xs","text-gray-500"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-medium","text-gray-800"],[1,"px-6","py-4","whitespace-nowrap","text-center"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","justify-end","space-x-2"],["title","Editar usuario",1,"text-orange-600","hover:text-orange-900","transition-colors","duration-150",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Eliminar usuario",1,"text-red-600","hover:text-red-900","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["colspan","6",1,"px-6","py-12","text-center"],[1,"flex","flex-col","items-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-16","h-16","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"px-4","py-2","bg-orange-600","text-white","rounded-lg","hover:bg-orange-700","transition","duration-150",3,"click"]],template:function(t,s){t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g("click",function(){return s.volverConfiguraciones()}),m(),e(4,"svg",4),d(5,"path",5)(6,"path",6)(7,"path",7)(8,"path",8),i()(),x(),e(9,"h1",9),r(10,"Usuarios del Sistema"),i()(),e(11,"button",10),g("click",function(){return s.registrarUsuario()}),m(),e(12,"svg",11),d(13,"path",12),i(),r(14," Nuevo Usuario "),i()(),x(),e(15,"div",13),d(16,"input",14),i(),e(17,"div",15),b(18,A,6,0,"div",16)(19,G,9,1,"div",16)(20,Q,3,3,"div",17),i()()),t&2&&(l(18),c("ngIf",s.isLoading),l(),c("ngIf",!s.isLoading&&s.errorMessage),l(),c("ngIf",!s.isLoading&&!s.errorMessage))},dependencies:[N,B,D,H,F],encapsulation:2})};export{z as ListaUsuariosPage};
