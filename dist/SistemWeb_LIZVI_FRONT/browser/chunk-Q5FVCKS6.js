import{a as A}from"./chunk-Y4VMV4HQ.js";import{d as R}from"./chunk-TFTKUNPW.js";import"./chunk-I36WQ6MU.js";import"./chunk-PIYG2HY2.js";import{e as D,g as F,h as V,i as N,j as O,n as $}from"./chunk-6Y6W3DZI.js";import{$a as w,Fa as P,Ka as u,R as x,Ta as m,Ua as e,Va as t,W as f,Wa as p,X as v,Y as _,Z as b,_a as M,ab as y,db as g,fb as c,i as U,jb as n,kb as h,l as L,lb as j,p as k,q as C,ra as s,ub as T,vb as S,wb as E,x as I}from"./chunk-NRNLENJO.js";var H=(d,r,i)=>({"text-green-600":d,"text-red-600":r,"text-yellow-600":i});function G(d,r){d&1&&(e(0,"div",24),p(1,"div",25),e(2,"p",26),n(3,"Cargando unidades de medida..."),t()())}function q(d,r){if(d&1){let i=y();e(0,"div",27)(1,"div",28),_(),e(2,"svg",29),p(3,"path",30),t(),b(),e(4,"h3",31),n(5,"Error al cargar las unidades de medida"),t()(),e(6,"div",32)(7,"p"),n(8),t(),e(9,"button",33),g("click",function(){f(i);let a=c();return v(a.listarUnidadesMedida())}),n(10," Reintentar "),t()()()}if(d&2){let i=c();s(8),h(i.errorMessage)}}function z(d,r){if(d&1){let i=y();M(0),e(1,"tr")(2,"td",46),n(3),t(),e(4,"td",47),n(5),t(),e(6,"td",48)(7,"span",49),n(8),t()(),e(9,"td",50)(10,"button",51),g("click",function(){let a=f(i).$implicit,l=c(3);return v(l.editarUnidadMedida(a.id))}),n(11,"Editar"),t(),e(12,"button",52),g("click",function(){let a=f(i).$implicit,l=c(3);return v(l.eliminarUnidadMedida(a.id))}),n(13,"Eliminar"),t()()(),w()}if(d&2){let i=r.$implicit;s(3),h(i.id),s(2),h(i.descripcion),s(2),m("ngClass",T(4,H,i.estado===1,i.estado===0,i.estado===2)),s(),j(" ",i.estado===1?"Activo":i.estado===0?"Inactivo":"Pendiente"," ")}}function J(d,r){d&1&&(e(0,"tr")(1,"td",53),n(2,"No se encontraron unidades de medida en el cat\xE1logo."),t()())}function K(d,r){if(d&1&&(M(0),u(1,z,14,8,"ng-container",45),S(2,"async"),u(3,J,3,0,"tr",41),w()),d&2){let i=r.ngIf,o=c(2);s(),m("ngForOf",E(2,2,o.unidadesMedidaData$)),s(2),m("ngIf",i.length===0)}}function Q(d,r){if(d&1&&(e(0,"div",34)(1,"div",35)(2,"table",36)(3,"thead",37)(4,"tr")(5,"th",38),n(6,"ID"),t(),e(7,"th",38),n(8,"Descripci\xF3n"),t(),e(9,"th",38),n(10,"Estado"),t(),e(11,"th",39),n(12,"Acciones"),t()()(),e(13,"tbody",40),u(14,K,4,4,"ng-container",41),S(15,"async"),t()()(),e(16,"div",42)(17,"span"),n(18,"Mostrando unidades de medida registradas"),t(),e(19,"div")(20,"button",43),n(21,"Anterior"),t(),e(22,"button",44),n(23,"Siguiente"),t()()()()),d&2){let i=c();s(14),m("ngIf",E(15,1,i.unidadesMedidaData$))}}var B=class d{location;router;api;isLoading=!1;initialLoadDone=!1;errorMessage=null;unidadesMedidaSubject=new U([]);unidadesMedidaData$=this.unidadesMedidaSubject.asObservable();constructor(){this.location=x(D),this.router=x(R),this.api=x(A)}ngOnInit(){this.listarUnidadesMedida()}listarUnidadesMedida(){this.errorMessage=null,this.isLoading=!0;let r={estado:2};this.api.listaUnidadesMedida(r).pipe(k({each:7e3}),C(a=>a.exito?a.unidadmedida:[]),I(a=>(this.errorMessage="No se pudo conectar al servidor. Revisa tu red o int\xE9ntalo m\xE1s tarde.",L([])))).subscribe({next:a=>{let l=[];Array.isArray(a)?l=a:a&&typeof a=="object"?l=[a]:l=[],this.unidadesMedidaSubject.next(l),this.initialLoadDone=!0},error:a=>{this.errorMessage=this.errorMessage??"No se pudo conectar al servidor."}}).add(()=>{this.isLoading=!1})}volverInicio(){this.router.navigate(["/inicio"])}registrarUnidadMedida(){this.router.navigate(["/registro-unidad-medida"])}editarUnidadMedida(r){}eliminarUnidadMedida(r){confirm(`\xBFEst\xE1s seguro de eliminar la unidad de medida con ID ${r}?`)}volverConfiguraciones(){this.router.navigate(["/configuraciones"])}static \u0275fac=function(i){return new(i||d)};static \u0275cmp=P({type:d,selectors:[["app-lista-unidades-medida-page"]],decls:31,vars:3,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-50","p-4","sm:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","pb-6","border-b","border-gray-300","flex-none"],[1,"flex","items-center","gap-4","mb-4","md:mb-0"],[1,"bg-orange-600","text-white","rounded-full","p-2","h-10","w-10","flex","items-center","justify-center","hover:bg-orange-700","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M5 12l14 0"],["d","M5 12l4 4"],["d","M5 12l4 -4"],[1,"text-3xl","font-extrabold","text-gray-900"],[1,"w-full","md:w-auto","px-6","py-3","bg-orange-600","text-white","font-semibold","rounded-lg","shadow-md","hover:bg-orange-700","transition","duration-150","flex","items-center","justify-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mt-6","flex","flex-col","sm:flex-row","gap-4","justify-between","items-center","bg-white","p-4","rounded-lg","shadow-md"],["type","text","placeholder","Buscar por descripci\xF3n o ID...",1,"w-full","sm:w-1/3","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-orange-600","focus:border-orange-600","transition"],[1,"w-full","sm:w-1/3","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-orange-600","focus:border-orange-600","transition","bg-white"],["value",""],["value","1"],["value","0"],["value","2"],[1,"w-full","sm:w-auto","px-4","py-2","bg-gray-200","text-gray-700","font-semibold","rounded-lg","hover:bg-gray-300","transition","duration-150"],["class","mt-8 flex justify-center items-center p-8",4,"ngIf"],["class","mt-8 bg-red-50 p-6 rounded-lg shadow-md",4,"ngIf"],["class","mt-8 flex-grow overflow-x-auto bg-white rounded-lg shadow-md",4,"ngIf"],[1,"mt-8","flex","justify-center","items-center","p-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-orange-600"],[1,"ml-3","text-gray-600"],[1,"mt-8","bg-red-50","p-6","rounded-lg","shadow-md"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-red-600","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-800","font-semibold"],[1,"mt-2"],[1,"mt-4","bg-red-600","text-white","px-4","py-2","rounded","hover:bg-red-700",3,"click"],[1,"mt-8","flex-grow","overflow-x-auto","bg-white","rounded-lg","shadow-md"],[1,"p-4"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-200"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngIf"],[1,"p-4","border-t","border-gray-200","bg-gray-50","flex","justify-between","items-center","text-sm"],[1,"px-3","py-1","border","border-gray-300","rounded-l-lg","hover:bg-gray-100"],[1,"px-3","py-1","border","border-gray-300","rounded-r-lg","hover:bg-gray-100"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-semibold","text-gray-800"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-800"],[3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-orange-600","hover:text-orange-800","mr-3",3,"click"],[1,"text-red-600","hover:text-red-800",3,"click"],["colspan","4",1,"px-6","py-4","text-center","text-gray-500"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g("click",function(){return o.volverConfiguraciones()}),_(),e(4,"svg",4),p(5,"path",5)(6,"path",6)(7,"path",7)(8,"path",8),t()(),b(),e(9,"h1",9),n(10,"Unidades de Medida"),t()(),e(11,"button",10),g("click",function(){return o.registrarUnidadMedida()}),_(),e(12,"svg",11),p(13,"path",12),t(),n(14," Nueva Unidad de Medida "),t()(),b(),e(15,"div",13),p(16,"input",14),e(17,"select",15)(18,"option",16),n(19,"Filtrar por Estado"),t(),e(20,"option",17),n(21,"Activo"),t(),e(22,"option",18),n(23,"Inactivo"),t(),e(24,"option",19),n(25,"Pendiente"),t()(),e(26,"button",20),n(27," Filtrar "),t()(),u(28,G,4,0,"div",21)(29,q,11,1,"div",22)(30,Q,24,3,"div",23),t()),i&2&&(s(28),m("ngIf",o.isLoading),s(),m("ngIf",!o.isLoading&&o.errorMessage),s(),m("ngIf",!o.isLoading&&!o.errorMessage))},dependencies:[$,F,V,N,O],encapsulation:2})};export{B as ListaUnidadesMedidaPage};
