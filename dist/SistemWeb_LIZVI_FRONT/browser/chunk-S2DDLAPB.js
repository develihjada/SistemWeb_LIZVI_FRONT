import{d as O}from"./chunk-TFTKUNPW.js";import{a as G}from"./chunk-PDEKQBO5.js";import"./chunk-I36WQ6MU.js";import"./chunk-PIYG2HY2.js";import{e as j,g as H,h as D,i as N,j as A,n as B}from"./chunk-6Y6W3DZI.js";import{$a as I,Fa as L,Ka as _,R as f,Ta as p,Ua as e,Va as t,W as v,Wa as m,X as h,Y as d,Z as g,_a as C,ab as w,db as u,fb as x,i as k,jb as n,kb as b,l as S,lb as y,p as F,q as E,ra as l,ub as P,vb as T,wb as V,x as M}from"./chunk-NRNLENJO.js";var $=(a,o,i)=>({"bg-green-100 text-green-800":a,"bg-yellow-100 text-yellow-800":o,"bg-red-100 text-red-800":i});function z(a,o){a&1&&(e(0,"div",18)(1,"div",19),d(),e(2,"svg",20),m(3,"circle",21)(4,"path",22),t(),n(5," Cargando familias... "),t()())}function q(a,o){if(a&1){let i=w();e(0,"div",18)(1,"div",23)(2,"div",24),d(),e(3,"svg",25),m(4,"path",26),t(),g(),e(5,"p",27),n(6),t()(),e(7,"button",28),u("click",function(){v(i);let r=x();return h(r.listarFamilias())}),n(8," Reintentar "),t()()()}if(a&2){let i=x();l(6),b(i.errorMessage)}}function J(a,o){if(a&1){let i=w();e(0,"tr",42)(1,"td",43),n(2),t(),e(3,"td",44)(4,"div",45),n(5),t(),e(6,"div",46),n(7,"Familia de productos"),t()(),e(8,"td",47)(9,"span",48),n(10),t()(),e(11,"td",49)(12,"button",50),u("click",function(){let r=v(i).$implicit,c=x(3);return h(c.editarFamilia(r.id))}),d(),e(13,"svg",40),m(14,"path",51),t(),n(15," Editar "),t(),g(),e(16,"button",52),u("click",function(){let r=v(i).$implicit,c=x(3);return h(c.eliminarFamilia(r.id))}),d(),e(17,"svg",40),m(18,"path",53),t(),n(19," Eliminar "),t()()()}if(a&2){let i=o.$implicit;l(2),b(i.id),l(3),b(i.descripcion),l(4),p("ngClass",P(4,$,i.estado===1,i.estado===2,i.estado===0)),l(),y(" ",i.estado===1?"Activo":i.estado===2?"Disponible":"Inactivo"," ")}}function K(a,o){a&1&&(e(0,"tr")(1,"td",54)(2,"div",39),d(),e(3,"svg",55),m(4,"path",56),t(),g(),e(5,"h3",57),n(6,"No se encontraron familias"),t(),e(7,"p",58),n(8,"No hay familias de productos registradas en el sistema."),t()()()())}function Q(a,o){if(a&1&&(C(0),e(1,"table",31)(2,"thead",32)(3,"tr")(4,"th",33),n(5,"ID"),t(),e(6,"th",33),n(7,"Descripci\xF3n"),t(),e(8,"th",34),n(9,"Estado"),t(),e(10,"th",35),n(11,"Acciones"),t()()(),e(12,"tbody",36),_(13,J,20,8,"tr",37)(14,K,9,0,"tr",30),t()(),e(15,"div",38)(16,"span"),n(17),t(),e(18,"div",39),d(),e(19,"svg",40),m(20,"path",41),t(),n(21," Actualizado ahora "),t()(),I()),a&2){let i=o.ngIf;l(13),p("ngForOf",i),l(),p("ngIf",i.length===0),l(3),y("Total de familias: ",i.length)}}function U(a,o){if(a&1&&(e(0,"div",29),_(1,Q,22,3,"ng-container",30),T(2,"async"),t()),a&2){let i=x();l(),p("ngIf",V(2,1,i.familiasData$))}}var R=class a{location;router;api;isLoading=!1;initialLoadDone=!1;errorMessage=null;familiasSubject=new k([]);familiasData$=this.familiasSubject.asObservable();constructor(){this.location=f(j),this.router=f(O),this.api=f(G)}ngOnInit(){this.listarFamilias()}listarFamilias(){this.errorMessage=null,this.isLoading=!0;let o={estado:2};this.api.listaFamilias(o).pipe(F({each:7e3}),E(r=>r.exito?r.familia:[]),M(r=>(this.errorMessage="No se pudo conectar al servidor. Revisa tu red o int\xE9ntalo m\xE1s tarde.",S([])))).subscribe({next:r=>{let c=[];Array.isArray(r)?c=r:r&&typeof r=="object"?c=[r]:c=[],this.familiasSubject.next(c),this.initialLoadDone=!0},error:r=>{this.errorMessage=this.errorMessage??"No se pudo conectar al servidor."}}).add(()=>{this.isLoading=!1})}volverInicio(){this.location.back()}registrarFamilia(){this.router.navigate(["/registro-familia"])}editarFamilia(o){this.router.navigate(["/editar-familia",o])}eliminarFamilia(o){confirm(`\xBFEst\xE1s seguro de eliminar la familia con ID ${o}? Esto afectar\xE1 a sus productos asociados.`)}volverConfiguraciones(){this.location.back()}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=L({type:a,selectors:[["app-lista-familia-page"]],decls:21,vars:3,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-50","p-4","sm:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","pb-6","border-b","border-gray-300","flex-none"],[1,"flex","items-center","gap-4","mb-4","md:mb-0"],[1,"bg-orange-600","text-white","rounded-full","p-2","h-10","w-10","flex","items-center","justify-center","hover:bg-orange-700","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M5 12l14 0"],["d","M5 12l4 4"],["d","M5 12l4 -4"],[1,"text-3xl","font-extrabold","text-gray-900"],[1,"w-full","md:w-auto","px-6","py-3","bg-orange-600","text-white","font-semibold","rounded-lg","shadow-md","hover:bg-orange-700","transition","duration-150","flex","items-center","justify-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mt-6","bg-white","p-4","rounded-lg","shadow-md"],["type","text","placeholder","Buscar por nombre de familia o ID...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-orange-600","focus:border-orange-600","transition"],[1,"mt-8","flex-grow","overflow-x-auto","bg-white","rounded-lg","shadow-md"],["class","p-8 text-center",4,"ngIf"],["class","p-4",4,"ngIf"],[1,"p-8","text-center"],[1,"inline-flex","items-center","px-4","py-2","font-semibold","leading-6","text-sm","shadow","rounded-md","text-orange-500","bg-orange-100","transition","ease-in-out","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-orange-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-700","font-medium"],[1,"mt-4","px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition","duration-150",3,"click"],[1,"p-4"],[4,"ngIf"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-200"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-center","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors duration-150",4,"ngFor","ngForOf"],[1,"p-4","border-t","border-gray-200","bg-gray-50","flex","justify-between","items-center","text-sm"],[1,"text-gray-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"hover:bg-gray-50","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-semibold","text-gray-800"],[1,"text-xs","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-center"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-orange-600","hover:text-orange-800","mr-3","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-red-600","hover:text-red-800","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["colspan","4",1,"px-6","py-8","text-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14-7l2 2-2 2M5 13l2-2-2-2"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm"]],template:function(i,s){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u("click",function(){return s.volverInicio()}),d(),e(4,"svg",4),m(5,"path",5)(6,"path",6)(7,"path",7)(8,"path",8),t()(),g(),e(9,"h1",9),n(10,"Familias de Productos"),t()(),e(11,"button",10),u("click",function(){return s.registrarFamilia()}),d(),e(12,"svg",11),m(13,"path",12),t(),n(14," Nueva Familia "),t()(),g(),e(15,"div",13),m(16,"input",14),t(),e(17,"div",15),_(18,z,6,0,"div",16)(19,q,9,1,"div",16)(20,U,3,3,"div",17),t()()),i&2&&(l(18),p("ngIf",s.isLoading),l(),p("ngIf",!s.isLoading&&s.errorMessage),l(),p("ngIf",!s.isLoading&&!s.errorMessage))},dependencies:[B,H,D,N,A],encapsulation:2})};export{R as ListaFamiliaPage};
