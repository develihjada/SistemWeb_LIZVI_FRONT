import{d as N}from"./chunk-TFTKUNPW.js";import{a as R}from"./chunk-L5RTUU5A.js";import"./chunk-PIYG2HY2.js";import{e as T,g as H,h as z,i as D,j as A,n as G}from"./chunk-6Y6W3DZI.js";import{$a as I,Ba as h,Fa as L,Ka as b,Ta as p,Ua as e,Va as t,W as v,Wa as c,X as f,Y as m,Z as g,_a as P,ab as C,db as u,fb as x,i as y,jb as n,kb as _,l as S,lb as w,p as k,q as M,ra as l,tb as j,vb as O,wb as V,x as E}from"./chunk-NRNLENJO.js";var F=(o,a)=>({"bg-green-100 text-green-800":o,"bg-red-100 text-red-800":a});function $(o,a){o&1&&(e(0,"div",22)(1,"div",23),m(),e(2,"svg",24),c(3,"circle",25)(4,"path",26),t(),n(5," Cargando clientes... "),t()())}function q(o,a){if(o&1){let i=C();e(0,"div",22)(1,"div",27)(2,"div",28),m(),e(3,"svg",29),c(4,"path",30),t(),g(),e(5,"p",31),n(6),t()(),e(7,"button",32),u("click",function(){v(i);let r=x();return f(r.listarClientes())}),n(8," Reintentar "),t()()()}if(o&2){let i=x();l(6),_(i.errorMessage)}}function Y(o,a){if(o&1){let i=C();e(0,"tr",46)(1,"td",47),n(2),t(),e(3,"td",48)(4,"div",49),n(5),t(),e(6,"div",50),n(7,"Cliente"),t()(),e(8,"td",48)(9,"div",49),n(10),t()(),e(11,"td",51)(12,"span",52),n(13),t()(),e(14,"td",53)(15,"button",54),u("click",function(){let r=v(i).$implicit,d=x(3);return f(d.verDetalleCliente(r.id))}),m(),e(16,"svg",44),c(17,"path",55)(18,"path",56),t(),n(19," Ver "),t(),g(),e(20,"button",57),u("click",function(){let r=v(i).$implicit,d=x(3);return f(d.editarCliente(r.id))}),m(),e(21,"svg",44),c(22,"path",58),t(),n(23," Editar "),t(),g(),e(24,"button",59),u("click",function(){let r=v(i).$implicit,d=x(3);return f(d.eliminarCliente(r.id))}),m(),e(25,"svg",44),c(26,"path",60),t(),n(27," Eliminar "),t()()()}if(o&2){let i=a.$implicit;l(2),_(i.id),l(3),_(i.nombres),l(5),_(i.apellidos),l(2),p("ngClass",j(5,F,i.estado===1,i.estado===0)),l(),w(" ",i.estado===1?"Activo":"Inactivo"," ")}}function J(o,a){o&1&&(e(0,"tr")(1,"td",61)(2,"div",43),m(),e(3,"svg",62),c(4,"path",63),t(),g(),e(5,"h3",64),n(6,"No se encontraron clientes"),t(),e(7,"p",65),n(8,"No hay clientes registrados en el sistema."),t()()()())}function K(o,a){if(o&1&&(P(0),e(1,"table",35)(2,"thead",36)(3,"tr")(4,"th",37),n(5,"ID"),t(),e(6,"th",37),n(7,"Nombres"),t(),e(8,"th",37),n(9,"Apellidos"),t(),e(10,"th",38),n(11,"Estado"),t(),e(12,"th",39),n(13,"Acciones"),t()()(),e(14,"tbody",40),b(15,Y,28,8,"tr",41)(16,J,9,0,"tr",34),t()(),e(17,"div",42)(18,"span"),n(19),t(),e(20,"div",43),m(),e(21,"svg",44),c(22,"path",45),t(),n(23," Actualizado ahora "),t()(),I()),o&2){let i=a.ngIf;l(15),p("ngForOf",i),l(),p("ngIf",i.length===0),l(3),w("Total de clientes: ",i.length)}}function Q(o,a){if(o&1&&(e(0,"div",33),b(1,K,24,3,"ng-container",34),O(2,"async"),t()),o&2){let i=x();l(),p("ngIf",V(2,1,i.clientesData$))}}var B=class o{constructor(a,i,s){this.api=a;this.router=i;this.location=s}isLoading=!1;initialLoadDone=!1;errorMessage=null;clientesSubject=new y([]);clientesData$=this.clientesSubject.asObservable();ngOnInit(){this.listarClientes()}listarClientes(){this.errorMessage=null,this.isLoading=!0;let a={estado:2};this.api.listaClientes(a).pipe(k({each:7e3}),M(r=>r.exito?r.cliente:[]),E(r=>(this.errorMessage="No se pudo conectar al servidor. Revisa tu red o int\xE9ntalo m\xE1s tarde.",S([])))).subscribe({next:r=>{let d=[];Array.isArray(r)?(d=r,console.log("\u2705 Procesando como array, elementos:",r.length)):r&&typeof r=="object"?(d=[r],console.log("\u2705 Procesando como objeto \xFAnico")):(d=[],console.log("\u26A0\uFE0F Procesando como array vac\xEDo")),this.clientesSubject.next(d),console.log("\u{1F680} clientesSubject despu\xE9s de actualizar:",this.clientesSubject.getValue()),this.initialLoadDone=!0},error:r=>{this.errorMessage=this.errorMessage??"No se pudo conectar al servidor."}}).add(()=>{this.isLoading=!1})}registrarCliente(){this.router.navigate(["/cliente/registrar-cliente"])}editarCliente(a){this.router.navigate(["/cliente/editar-cliente",a])}verDetalleCliente(a){this.router.navigate(["/cliente/detalle-cliente",a])}eliminarCliente(a){confirm("\xBFEst\xE1 seguro que desea eliminar este cliente?")&&console.log("Eliminar cliente:",a)}volverCatalogos(){this.location.back()}static \u0275fac=function(i){return new(i||o)(h(R),h(N),h(T))};static \u0275cmp=L({type:o,selectors:[["app-lista-clientes-page"]],decls:28,vars:3,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-50","p-4","sm:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","pb-6","border-b","border-gray-300","flex-none"],[1,"flex","items-center","gap-4","mb-4","md:mb-0"],[1,"bg-orange-600","text-white","rounded-full","p-2","h-10","w-10","flex","items-center","justify-center","hover:bg-orange-700","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M5 12l14 0"],["d","M5 12l4 4"],["d","M5 12l4 -4"],[1,"text-3xl","font-extrabold","text-gray-900"],[1,"w-full","md:w-auto","px-6","py-3","bg-orange-600","text-white","font-semibold","rounded-lg","shadow-md","hover:bg-orange-700","transition","duration-150","flex","items-center","justify-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mt-6","flex","flex-col","sm:flex-row","gap-4","justify-between","items-center","bg-white","p-4","rounded-lg","shadow-md"],["type","text","placeholder","Buscar por nombre, apellidos o ID...",1,"w-full","sm:w-1/2","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-orange-600","focus:border-orange-600","transition"],[1,"w-full","sm:w-1/4","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-orange-600","focus:border-orange-600","transition","bg-white"],["value",""],["value","1"],["value","0"],[1,"mt-8","flex-grow","overflow-x-auto","bg-white","rounded-lg","shadow-md"],["class","p-8 text-center",4,"ngIf"],["class","p-4",4,"ngIf"],[1,"p-8","text-center"],[1,"inline-flex","items-center","px-4","py-2","font-semibold","leading-6","text-sm","shadow","rounded-md","text-orange-500","bg-orange-100","transition","ease-in-out","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-orange-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-700","font-medium"],[1,"mt-4","px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition","duration-150",3,"click"],[1,"p-4"],[4,"ngIf"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-200"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-center","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors duration-150",4,"ngFor","ngForOf"],[1,"p-4","border-t","border-gray-200","bg-gray-50","flex","justify-between","items-center","text-sm"],[1,"text-gray-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"hover:bg-gray-50","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-semibold","text-gray-800"],[1,"text-xs","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-center"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-blue-600","hover:text-blue-800","mr-3","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"text-orange-600","hover:text-orange-800","mr-3","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-red-600","hover:text-red-800","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["colspan","5",1,"px-6","py-8","text-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm"]],template:function(i,s){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u("click",function(){return s.volverCatalogos()}),m(),e(4,"svg",4),c(5,"path",5)(6,"path",6)(7,"path",7)(8,"path",8),t()(),g(),e(9,"h1",9),n(10,"Gesti\xF3n de Clientes"),t()(),e(11,"button",10),u("click",function(){return s.registrarCliente()}),m(),e(12,"svg",11),c(13,"path",12),t(),n(14," Registrar Cliente "),t()(),g(),e(15,"div",13),c(16,"input",14),e(17,"select",15)(18,"option",16),n(19,"Todos los estados"),t(),e(20,"option",17),n(21,"Activo"),t(),e(22,"option",18),n(23,"Inactivo"),t()()(),e(24,"div",19),b(25,$,6,0,"div",20)(26,q,9,1,"div",20)(27,Q,3,3,"div",21),t()()),i&2&&(l(25),p("ngIf",s.isLoading),l(),p("ngIf",!s.isLoading&&s.errorMessage),l(),p("ngIf",!s.isLoading&&!s.errorMessage))},dependencies:[G,H,z,D,A],styles:[".cliente-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.cliente-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #fb923c1a}.status-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .75rem}}"]})};export{B as ListaClientesPage};
